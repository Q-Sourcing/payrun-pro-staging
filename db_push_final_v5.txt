Initialising login role...
Connecting to remote database...
Do you want to push these migrations to the remote database?
 • 20260104000000_rename_departments_to_sub_departments.sql
 • 20260104203000_create_notification_templates.sql
 • 20260105000000_enhance_rbac_grants.sql

 [Y/n] Applying migration 20260104000000_rename_departments_to_sub_departments.sql...
NOTICE (00000): policy "Enable read access for authenticated users" for relation "public.head_office_pay_group_members" does not exist, skipping
NOTICE (00000): policy "Enable read access for authenticated users" for relation "public.head_office_pay_groups_regular" does not exist, skipping
NOTICE (00000): policy "Enable read access for authenticated users" for relation "public.head_office_pay_groups_interns" does not exist, skipping
NOTICE (00000): policy "Enable read access for authenticated users" for relation "public.head_office_pay_groups_expatriates" does not exist, skipping
NOTICE (00000): policy "Enable read access for authenticated users" for relation "public.sub_departments" does not exist, skipping
NOTICE (00000): policy "Enable insert access for authenticated users" for relation "public.head_office_pay_group_members" does not exist, skipping
NOTICE (00000): policy "Enable insert access for authenticated users" for relation "public.head_office_pay_groups_regular" does not exist, skipping
NOTICE (00000): policy "Enable insert access for authenticated users" for relation "public.head_office_pay_groups_interns" does not exist, skipping
NOTICE (00000): policy "Enable insert access for authenticated users" for relation "public.head_office_pay_groups_expatriates" does not exist, skipping
NOTICE (00000): policy "Enable insert access for authenticated users" for relation "public.sub_departments" does not exist, skipping
NOTICE (00000): policy "Enable update access for authenticated users" for relation "public.head_office_pay_group_members" does not exist, skipping
NOTICE (00000): policy "Enable update access for authenticated users" for relation "public.head_office_pay_groups_regular" does not exist, skipping
NOTICE (00000): policy "Enable update access for authenticated users" for relation "public.head_office_pay_groups_interns" does not exist, skipping
NOTICE (00000): policy "Enable update access for authenticated users" for relation "public.head_office_pay_groups_expatriates" does not exist, skipping
NOTICE (00000): policy "Enable update access for authenticated users" for relation "public.sub_departments" does not exist, skipping
NOTICE (00000): policy "Enable delete access for authenticated users" for relation "public.head_office_pay_group_members" does not exist, skipping
NOTICE (00000): policy "Enable delete access for authenticated users" for relation "public.head_office_pay_groups_regular" does not exist, skipping
NOTICE (00000): policy "Enable delete access for authenticated users" for relation "public.head_office_pay_groups_interns" does not exist, skipping
NOTICE (00000): policy "Enable delete access for authenticated users" for relation "public.head_office_pay_groups_expatriates" does not exist, skipping
NOTICE (00000): policy "Enable delete access for authenticated users" for relation "public.sub_departments" does not exist, skipping
NOTICE (00000): policy "Sub-Department managers can view sub-department users" for relation "public.head_office_pay_group_members" does not exist, skipping
NOTICE (00000): policy "Sub-Department managers can view sub-department users" for relation "public.head_office_pay_groups_regular" does not exist, skipping
NOTICE (00000): policy "Sub-Department managers can view sub-department users" for relation "public.head_office_pay_groups_interns" does not exist, skipping
NOTICE (00000): policy "Sub-Department managers can view sub-department users" for relation "public.head_office_pay_groups_expatriates" does not exist, skipping
NOTICE (00000): policy "Sub-Department managers can view sub-department users" for relation "public.users" does not exist, skipping
ERROR: function public.get_user_sub_department_id(uuid) does not exist (SQLSTATE 42883)                              
At statement: 42                                                                                                     
CREATE POLICY "Sub-Department managers can view sub-department users" ON public.users                                
    FOR SELECT TO authenticated                                                                                      
    USING (                                                                                                          
        (public.check_is_org_admin(auth.uid()) AND sub_department_id = public.get_user_sub_department_id(auth.uid()))
    )                                                                                                                
Try rerunning the command with --debug to troubleshoot the error.
